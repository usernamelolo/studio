<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GROK ADULT STUDIO ‚Äî DEBUG VERSION</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #0a0000; color: #fff; font-family: system-ui; }
    .header { background: linear-gradient(90deg, #4c0000, #ff1a4d); }
    .card { background: #1a0000; border: 3px solid #ff1a4d; }
    #debug { background: #000; border: 2px solid #00ff00; font-family: monospace; white-space: pre-wrap; }
  </style>
</head>
<body class="min-h-screen pb-20">
  <div class="max-w-7xl mx-auto p-6">
    <header class="header text-center py-12 rounded-3xl mb-12">
      <h1 class="text-6xl font-black">GROK ADULT STUDIO DEBUG</h1>
      <p class="text-2xl mt-3 text-red-400">–ñ—ë—Å—Ç–∫–∏–π —Ç–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ‚Ä¢ –Ø–ø–æ–Ω–∏—è 2026 ‚Ä¢ –ë–µ–∑ —Ü–µ–Ω–∑—É—Ä—ã</p>
    </header>

    <div class="card p-8 rounded-3xl">
      <h2 class="text-4xl font-bold mb-6 text-red-500">–ì–ï–ù–ï–†–ê–¶–ò–Ø –ñ–Å–°–¢–ö–ò–• –ö–ê–†–¢–ò–ù–û–ö</h2>
      <textarea id="prompt" rows="6" class="w-full bg-black border-2 border-red-600 rounded-2xl p-6 text-lg" placeholder="20-–ª–µ—Ç–Ω—è—è —è–ø–æ–Ω—Å–∫–∞—è —Ç—ë–ª–∫–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ–ª–∞—è, –æ–≥—Ä–æ–º–Ω—ã–µ –º–æ–∫—Ä—ã–µ —Å–∏—Å—å–∫–∏, –ª–∏—Ü–æ –∏ —Ç–µ–ª–æ –∑–∞–ª–∏—Ç–æ –≥—É—Å—Ç–æ–π —Å–ø–µ—Ä–º–æ–π, —Ä–æ—Ç –æ—Ç–∫—Ä—ã—Ç, —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ 8k photo"></textarea>
      <button onclick="generateTest()" class="mt-8 w-full bg-red-600 hover:bg-red-700 text-3xl font-bold py-8 rounded-3xl">üöÄ –°–ì–ï–ù–ï–†–ò–†–û–í–ê–¢–¨ 4 –ñ–Å–°–¢–ö–ò–ï –ö–ê–†–¢–ò–ù–ö–ò</button>
    </div>

    <div id="gallery" class="mt-12 grid grid-cols-2 md:grid-cols-4 gap-6"></div>

    <div id="debug" class="mt-12 p-8 text-green-400 text-sm overflow-auto max-h-96 border-2 border-green-500 rounded-3xl">
      DEBUG LOG (–Ω–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ):
    </div>
  </div>

  <script>
    const API_BASE = "/api/proxy";

    async function generateTest() {
      const prompt = document.getElementById('prompt').value.trim();
      const debug = document.getElementById('debug');
      debug.innerHTML = 'üöÄ –û—Ç–ø—Ä–∞–≤–ª—è—é –∑–∞–ø—Ä–æ—Å –≤ Grok...\n\n';

      try {
        const res = await fetch(API_BASE + '/v1/images/generations', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            model: "grok-imagine-image",
            prompt: prompt,
            n: 4,
            response_format: "url"
          })
        });

        debug.innerHTML += `–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞: ${res.status} ${res.statusText}\n`;

        const data = await res.json();
        debug.innerHTML += '–ü–û–õ–ù–´–ô –û–¢–í–ï–¢ –û–¢ GROK:\n' + JSON.stringify(data, null, 2) + '\n\n';

        if (data.data && data.data.length > 0) {
          displayImages(data.data);
          debug.innerHTML += '‚úÖ –ö–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ–ª—É—á–µ–Ω—ã! –°–º–æ—Ç—Ä–∏ –≥–∞–ª–µ—Ä–µ—é –Ω–∏–∂–µ üí¶';
        } else {
          debug.innerHTML += '‚ùå –ù–µ—Ç data.data ‚Äî –ø—Ä–æ–≤–µ—Ä—å –∫–ª—é—á –≤ Vercel –∏–ª–∏ –ø—Ä–æ–º–ø—Ç';
        }
      } catch (e) {
        debug.innerHTML += 'üí• –û–®–ò–ë–ö–ê –ó–ê–ü–†–û–°–ê: ' + e.message + '\n';
      }
    }

    function displayImages(images) {
      const gallery = document.getElementById('gallery');
      gallery.innerHTML = '';
      images.forEach((img, i) => {
        const url = img.url || '';
        const div = document.createElement('div');
        div.className = 'relative group';
        div.innerHTML = `
          <img src="${url}" class="w-full rounded-3xl shadow-2xl" onerror="this.src='https://via.placeholder.com/400x500/4c0000/ffffff?text=NO+IMAGE'">
          <button onclick="download('${url}')" class="absolute bottom-4 right-4 bg-black/80 px-6 py-2 rounded-2xl text-sm hover:bg-red-600">–°–ö–ê–ß–ê–¢–¨ ${i+1}</button>
        `;
        gallery.appendChild(div);
      });
    }

    function download(url) {
      if (!url) return alert('–ù–µ—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É');
      const a = document.createElement('a');
      a.href = url;
      a.download = `grok-xxx-${Date.now()}.jpg`;
      a.click();
    }
  </script>
</body>
</html>
